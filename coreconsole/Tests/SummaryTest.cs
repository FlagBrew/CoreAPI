using System.Text.Json;
using coreconsole.handlers;
using coreconsole.Models;
using coreconsole.utils;
using PKHeX.Core;

namespace Tests;

[TestFixture]
public class SummaryTest
{
    [SetUp]
    public void Setup()
    {
        Helpers.Init();
        // var a = File.ReadAllText("../../../../data/move_types.json");
        // Move.MoveTypes = JsonSerializer.Deserialize<List<MoveType>>(a!);
    }

    [Test]
    public void CanGetPokemonSummary()
    {
        // Create a new Pokemon from base64
        // const string b64 =
        // "Snn82gAAtK2MAgAAIuC/cRQsEABBAQAApBGMsAMABvwAAAD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEcAdQB5AAAAcABpAG4AAAAAAAAAAAAAAAAASQCSAVkAGAEQGBAYAwMDAwAAAAAAAAAAAAD///+/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADJFAHIAaQBjAAAAAAAAAAAAAAAAAAAAAAAAAIUABA46AAAAAAAWDAUAAAAKAAQFABhMCAICAAAAAAAAAABkAAAAPgE+AVgBGAGkAKUA+QAAAAAAAAA=";
        // const string b64 =
        // "vnSSVQAAdV6OAQAAbyBHARQsEABGFg0C/PwAAAAAAAAAAAAA//8TAHIBJABMAQAACCAgAAMDAwA/fvefAAAAAQACAAAAAAAAUwB0AGEAcgBTAGMAcgBlAGEAbQD//wAM//8PAAAAAABHAE8ATgBEAE8AUgD//wAAFwUaFwYD0AcxdQAEZAAAAA==";
        // var pkmnBytes = Convert.FromBase64String(b64);
        // const string a = "0101ff0100d93e0004053c5b1f2019506404b351013101790133014001e596fc471402023e00d900b400a3004b004e83a0adadb850000000000092a7a4b1aca0ad508b8b50";
        // const string a =
        // "18e9b2f800006c628a030000a1a850120b010000a800040000000000433257db03030000000006fc00fc000000000000000000000000000000000000000000000000000000000000808080000000000000000000000000005300700072006900670061007400690074006f000000000000000a0027009e022c00231e28190000000000000000000000001800ffffcf3e000000000b050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000320000000000ff02000000000000000000000000000000000000000000000000000000000000000000004d00750074006500000000000000000000000000000000000000ff00000000000000000017040405000050000485000000000000000000000000000000000000000000000000000000000000000000000700180016000e0014000a000d000000";
        // const string a =
        // "9588a98f000030e5200300000f7742ced0121300e801000028e2645b000437e82d171b1b00000000000000000000000000000000000000000000000000000000cd30af30ed30ba30de3000000000000000000000000000000000d202c702980100000500000000000000000000000000000000000fab1719000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000034ff2bff0eff34ff36ff0000000000000000000000000000000000000000000000000000000000000000b000044b00220102000100000000";
        // const string a =
        // "0000000000008cb4cc01000000000000000000007500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e630ad30ce30aa30fc30000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000001300000000000000000000000000000000000050004b0048006500580000000000000000000000000000000000000201000000320000000000303000000000ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101000000317504000000000000000000000000000000000000000000000000000000000000000000000001000c00060006000600060006000000";
        // const string a =
        // "00000000000099aadb030000c03a8f49000000001a01000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000490072006f006e0020004c0065006100760065007300000000000100000000000000230000000000000000000000000000000c00000000000000000000130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000ff020000000000000000000000000000000000000000000000000000000000000000000050004b00480065005800000000000000000000000000000000000000000000000000000017051f000000000004000000000000000000000000000000000000000000000000000000000000000000000001000c00070006000700060007000000";
        // const string a =
        // "9720a17c000080c07d01ad02acc0efa65a6202001a010000422374330c00061608070d03000000000000000000000000000000000000000000000000000000004c006100740069006f007300000000000000000000000000000013005e002701b600050505050000000000000000000000000000ffc7ff3f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000047007500740065006e00000000000000000000000000000000008e00051d7f01030000001501030000004001041e001b3100010700000000";
        // const string a =
        // "93376e1600009bec650300009bbc892640420f00af001200000000007ad56b4f0a0a04000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000788100000000000041006c006300720065006d00690065000000000000000000000021005502ba00090323140a0f0000000021005502000000000f013ffcff370a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002c000000020000000000ff00000000000000000000000000000053006c0065006500700079000000000000000000000000000000a40513001d000715071d15071d0062ea280004810000000000000000000000000000000000000000000000000000000000000000000064000f017100ba00b400000112010000";
        // const string a =
        // "000000000000bef065030000f87eb53840420f00a50014000000000051f74348121204000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041006c006300720065006d006900650000000000680000000000760107019c005502102010200303030321005502000000000f01ffffff3f0a000000000000000000000000000000000000000000000050004b0048006500580000000000000000000000000000000000000201000000320000000000000000000000000000000000000000002d000000020000000000ff00000000000000000000000000000054006f006d000000580000000000000000000000000000000000000000000000001501061501060062ea4400040100000000000000000000000000000000000000000000000000000000000000000000";
        const string a =
            "1a9b12b00000701626020000537e0c70d8000000467800020000000000000000000000000000000021003700fd00000023190a0000000000b9227415000000000a13000000000000420061007300630075006c0069006e00ffff0000ffff001400000000000000004400650073006d0075006e006400ffff00000017021000000e00000406000000";
        var pkmnBytes = Helpers.StringToByteArray(a);
        var pkmn = EntityFormat.GetFromBytes(pkmnBytes, EntityContext.Gen3);

        // Get the summary
        var summary = Summary.GetSummary(pkmn!);

        Console.WriteLine(JsonSerializer.Serialize(summary));
    }
}